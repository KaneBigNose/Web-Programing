<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>현재 위치 지도</title>
<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=2d1c2eac9c9a742727b5d20732316fc1&libraries=services"></script>
<script>
function displayMarker(locPosition, message) {
	var imageSize = new kakao.maps.Size(24, 35);
	var markerImage = new kakao.maps.MarkerImage('https://via.placeholder.com/24x35', imageSize); // 마커 이미지 URL 예시

	// 마커를 생성합니다
	var marker = new kakao.maps.Marker({
		position: locPosition, 
		image: markerImage
	});

	var iwContent = message; // 인포윈도우에 표시할 내용

	// 인포윈도우를 생성합니다
	var infowindow = new kakao.maps.InfoWindow({
		content: iwContent
	});

	// 인포윈도우를 마커위에 표시합니다
	infowindow.open(map, marker);

	// 지도 중심좌표를 접속위치로 변경합니다
	map.setCenter(locPosition);
}

function currentLocation() {
	if (navigator.geolocation) {
		navigator.geolocation.getCurrentPosition(function(position) {
			var lat = position.coords.latitude,
			    lon = position.coords.longitude;
			var locPosition = new kakao.maps.LatLng(lat, lon);
			var message = '<div style="padding:5px;">현재 위치</div>';
			displayMarker(locPosition, message);
		});
	} else {
		var locPosition = new kakao.maps.LatLng(37.566826, 126.978656), // 기본 위치 설정
			message = '현재 위치를 알 수 없어 기본 위치로 이동합니다.';
		displayMarker(locPosition, message);
	}
}

// 지도 초기화 및 현재 위치 표시
var map;
function initMap() {
	map = new kakao.maps.Map(document.getElementById('map'), {
		center: new kakao.maps.LatLng(37.566826, 126.978656), // 초기 중심 위치 설정
		level: 3 // 지도 확대 레벨 설정
	});
	currentLocation(); // 현재 위치 가져오기 및 표시
}
</script>
</head>
<body onload="initMap()">
<div id="map" style="width:100%;height:400px;"></div>
</body>
</html>