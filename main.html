<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>주소로 장소 표시하기</title>

</head>

<body>
    <div id="map" style="width: 700px;height:500px;"></div>
    <script type="text/javascript"
        src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=ab20dd7e58d76f56e7c1af0c3c89152b&libraries=services,clusterer,drawing"></script>
    <script>
        const url = 'https://apis.data.go.kr/6260000/BusanIlglWkstInfoService/getIlglWkstInfo?serviceKey=%2B9h%2BiNdRBhISq%2BfkcRcEXacYgP9rBOreEaMlS6GulIOg18rVyFYyqnJa4l8yBvHsHn860gZpbboSHpRtR5IFfw%3D%3D&numOfRows=1000&pageNo=1&resultType=json'; /*URL*/

        var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
            mapOption = {
                center: new kakao.maps.LatLng(35.13457, 129.1031), // 지도의 중심좌표
                level: 3
            };
  
        var map = new kakao.maps.Map(mapContainer, mapOption);

        var geocoder = new kakao.maps.services.Geocoder();

        fetch(url)

            .then(res => res.json())
            .then(resJson => {
                var centers = resJson.getIlglWkstInfo.body.items.item;

                for (var i = 0; i < centers.length; i++) {

                    var FirstAdr = centers[i]["rdnWhlAddr"];
                    var LastAdr = centers[i]["violPlcNm"]; 
                    var address = FirstAdr + " " + LastAdr; 

                    // console.log(address);

                    geocoder.addressSearch(address, function (result, status) {

                        if (status === kakao.maps.services.Status.OK) {

                            var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

                            var marker = new kakao.maps.Marker({
                                map: map,
                                position: coords
                            });

                            var infoWindow = new kakao.maps.InfoWindow({
                                content: centers[i]["ctlType"]
                            });

                            kakao.maps.event.addListener(marker, "click", mouseClickListener(map, marker, infoWindow));
                            kakao.maps.event.addListener(marker, "mouseout", mouseOutListener(infoWindow));

                        }
                    });
                }
            });

        function mouseClickListener(map, marker, infoWindow) {
            return function () {
                infoWindow.open(map, marker);
            };
        }

        function mouseOutListener(infoWindow) {
            return function () {
                infoWindow.close();
            };
        }
    </script>
</body>

</html>





        <!-- var positions = [
             {
                 title: '이동형 CCTV 단속',
                 latlng: new kakao.maps.LatLng(35.2094805, 129.007315)
             },
             {
                 title: '고정형 CCTV 단속',
                 latlng: new kakao.maps.LatLng(35.1332918, 129.1008515)
             }
         ];
        for (var i = 0; i < positions.length; i++) {
          var marker = new kakao.maps.Marker({   // 마커를 생성합니다
                 map: map, // 마커를 표시할 지도
                 position: positions[i].latlng, // 마커를 표시할 위치
                 clickable: true
             });

             if (positions[i].title == '이동형 CCTV 단속') {
                 var iwContent = '<div style="padding:5px;"> 이동형 CCTV 단속 구간</div>';
             }

             else {
                 var iwContent = '<div style="padding:5px;"> 고정형 CCTV 단속 구간</div>';
             }

             var infowindow = new kakao.maps.InfoWindow({
                 content: iwContent
             });

             kakao.maps.event.addListener(marker, 'click', makeOverListener(map, marker, infowindow));
             kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
         }
         function makeOverListener(map, marker, infowindow) {
             return function () {
                 infowindow.open(map, marker);
             };
         }
         function makeOutListener(infowindow) {
             return function () {
                 infowindow.close();
             };
         } -->